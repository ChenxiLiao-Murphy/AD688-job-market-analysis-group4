<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>About – Geographic and Remote Work Job Market Analysis - Summ25</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-58669c723890bbf731c346d0ef1150dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Geographic and Remote Work Job Market Analysis - Summ25</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./introduction.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data_cleaning_eda.html"> 
<span class="menu-text">Data Cleaning &amp; EDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./eda_enhance.html"> 
<span class="menu-text">EDA (Enhanced)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./skill_gap_analysis.html"> 
<span class="menu-text">Skill Gap Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./nlp_methods.html"> 
<span class="menu-text">NLP Methods</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ml_analysis.html"> 
<span class="menu-text">ML Methods</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-this-project" id="toc-about-this-project" class="nav-link active" data-scroll-target="#about-this-project"><span class="header-section-number">1</span> About This Project</a></li>
  <li><a href="#team-members-and-contributions" id="toc-team-members-and-contributions" class="nav-link" data-scroll-target="#team-members-and-contributions"><span class="header-section-number">2</span> Team Members and Contributions</a></li>
  <li><a href="#conclusion-and-key-takeaways" id="toc-conclusion-and-key-takeaways" class="nav-link" data-scroll-target="#conclusion-and-key-takeaways"><span class="header-section-number">3</span> Conclusion and Key Takeaways</a>
  <ul class="collapse">
  <li><a href="#ai-job-growth-which-cities-and-states-lead" id="toc-ai-job-growth-which-cities-and-states-lead" class="nav-link" data-scroll-target="#ai-job-growth-which-cities-and-states-lead"><span class="header-section-number">3.1</span> AI Job Growth: Which Cities and States Lead?</a></li>
  <li><a href="#remote-job-trends-increasing-or-decreasing" id="toc-remote-job-trends-increasing-or-decreasing" class="nav-link" data-scroll-target="#remote-job-trends-increasing-or-decreasing"><span class="header-section-number">3.2</span> Remote Job Trends: Increasing or Decreasing?</a></li>
  <li><a href="#urban-vs.-rural-job-markets-for-ai" id="toc-urban-vs.-rural-job-markets-for-ai" class="nav-link" data-scroll-target="#urban-vs.-rural-job-markets-for-ai"><span class="header-section-number">3.3</span> Urban vs.&nbsp;Rural Job Markets for AI</a></li>
  <li><a href="#are-tech-hubs-still-dominant" id="toc-are-tech-hubs-still-dominant" class="nav-link" data-scroll-target="#are-tech-hubs-still-dominant"><span class="header-section-number">3.4</span> Are Tech Hubs Still Dominant?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">About</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="about-this-project" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> About This Project</h1>
<p>This project explores the evolving landscape of the U.S. job market through the lens of geographic distribution and remote work trends. Leveraging Lightcast’s extensive job postings dataset, we analyze how employment patterns differ across regions, industries, and occupations, with a focus on:</p>
<ul>
<li><p>The rise of AI-related job opportunities versus non-AI roles;</p></li>
<li><p>Regional shifts in job availability and growth across states and metropolitan areas;</p></li>
<li><p>The impact and distribution of remote, hybrid, and onsite work models;</p></li>
<li><p>Emerging career paths in both urban and rural labor markets.</p></li>
</ul>
<p>By combining Exploratory Data Analysis (EDA), Spark SQL, Natural Language Processing (NLP), and Machine Learning (including PCA and clustering), our project aims to uncover hidden structures in job posting data and generate actionable insights for students, job seekers, and policymakers navigating the post-pandemic workforce.</p>
<p>This project was developed as part of AD688 Web Analytics and Big Data Tools at Boston University, integrating large-scale data processing and visualization techniques to inform real-world workforce decisions.</p>
</section>
<section id="team-members-and-contributions" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Team Members and Contributions</h1>
<p>This project was a collaborative effort conducted by a three-member team, with each member responsible for distinct technical and strategic modules:</p>
<ul>
<li><p><strong>Xiangwen (Rosa) Wang</strong> (<a href="mailto:wxwrosa@bu.edu" class="email">wxwrosa@bu.edu</a>)<br>
Led the <strong>Data Cleaning &amp; EDA</strong> phase, including preprocessing of raw datasets, remote/AI classification, and visualization of job distributions.<br>
Spearheaded the <strong>NLP-based Skill Gap Analysis</strong>, extracting in-demand skills and aligning them with team competencies.<br>
Oversaw the <strong>entire project timeline</strong>, coordinated team deliverables ahead of deadlines, and ensured design consistency across all <code>.qmd</code> files and the Quarto website.<br>
Played a central role in structuring the final report and presentation layout.</p></li>
<li><p><strong>Chenxi (Murphy) Liao</strong> (<a href="mailto:murphyy@bu.edu" class="email">murphyy@bu.edu</a>)<br>
Responsible for both <strong>Unsupervised Learning</strong> and <strong>Supervised Learning</strong> modules.<br>
Applied <strong>KMeans clustering</strong> to identify job market segments based on occupational and geographic features, and implemented classification/regression models to analyze remote type and salary trends.</p></li>
<li><p><strong>Yijiun (Eugenia) Tseng</strong> (<a href="mailto:yijiun@bu.edu" class="email">yijiun@bu.edu</a>)<br>
Focused on the <strong>Enhanced EDA</strong> module, producing in-depth geographic visualizations of job type and remote patterns.<br>
Co-developed the <strong>Skill Gap Analysis</strong>, emphasizing skill demand trends and upskilling recommendations for target roles.</p></li>
</ul>
</section>
<section id="conclusion-and-key-takeaways" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Conclusion and Key Takeaways</h1>
<section id="ai-job-growth-which-cities-and-states-lead" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="ai-job-growth-which-cities-and-states-lead"><span class="header-section-number">3.1</span> AI Job Growth: Which Cities and States Lead?</h2>
<ul>
<li><strong>Which cities or states have the highest job growth for AI vs.&nbsp;non-AI careers?</strong></li>
</ul>
<p>The job market for both AI and non-AI roles reveals a clear pattern of geographic concentration, particularly within a few dominant states and metropolitan areas. Texas stands out with the highest total number of job postings overall, driven primarily by non-AI roles, yet it still maintains a competitive presence in AI-related positions. California and New York also lead in AI job counts, underscoring their continued dominance in technology-driven employment. However, even in these leading states, AI roles comprise only a small fraction of total postings, reflecting the relatively slower expansion of AI-specific occupations compared to traditional roles.</p>
<p>At the city level, New York City, Chicago, and Austin emerge as top hubs for AI job volume. Among them, Austin is particularly noteworthy—it shows a strong presence of AI opportunities despite a moderate overall job count. This suggests a higher proportion of AI-related roles in the city, positioning it as a rising AI center. Overall, the data highlights that AI job growth is highly concentrated in coastal tech hubs and select mid-sized innovation cities, whereas non-AI jobs are more broadly distributed, especially in larger, diversified states like Texas and Ohio.</p>
<hr>
</section>
<section id="remote-job-trends-increasing-or-decreasing" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="remote-job-trends-increasing-or-decreasing"><span class="header-section-number">3.2</span> Remote Job Trends: Increasing or Decreasing?</h2>
<ul>
<li><strong>Are remote jobs increasing or decreasing across industries?</strong></li>
</ul>
<p>Despite the growing visibility of remote work, current job market data reveals several inconsistencies and challenges in tracking remote job trends across industries. One of the major limitations lies in the inconsistency of remote job labeling—over 55,000 postings lack clear classification, significantly reducing the reliability of remote job trend analysis.</p>
<p>Among the positions that are clearly labeled, fully remote roles continue to dominate, especially in technical and knowledge-based sectors. This suggests a sustained demand for remote-friendly formats. However, hybrid and on-site roles may be underreported, raising concerns about data completeness and the accuracy of job type representation.</p>
<p>These findings indicate that while remote work remains an important part of the job landscape, its distribution is uneven and often underrepresented in data sources. Improving standardization in job labeling and expanding access to remote opportunities across a broader range of industries are critical next steps for workforce development.</p>
<hr>
</section>
<section id="urban-vs.-rural-job-markets-for-ai" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="urban-vs.-rural-job-markets-for-ai"><span class="header-section-number">3.3</span> Urban vs.&nbsp;Rural Job Markets for AI</h2>
<ul>
<li><strong>How do urban vs.&nbsp;rural job markets differ for AI and non-AI careers?</strong></li>
</ul>
<p>The primary distinction between urban and rural job markets lies in the volume of total job postings, rather than the relative share of AI jobs. As shown in the bar chart, rural areas post a significantly higher number of job openings overall, including both AI and non-AI roles. However, the proportion of AI jobs remains similar across regions—approximately 4% of total postings in both urban and rural areas, as reflected in the pie charts.</p>
<p>This minimal difference in AI job share indicates that AI-related opportunities are becoming geographically democratized. In other words, while urban areas traditionally dominate in tech hiring, rural regions are beginning to close the gap. The trend suggests that the urban AI advantage may be narrowing, possibly due to the rise of remote work, distributed teams, and increased access to digital infrastructure in rural communities (Manyika et al., 2019).</p>
<p>This insight implies that job seekers in rural areas may now access comparable AI-related opportunities without relocating, which has meaningful implications for workforce development and policy planning.</p>
<hr>
</section>
<section id="are-tech-hubs-still-dominant" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="are-tech-hubs-still-dominant"><span class="header-section-number">3.4</span> Are Tech Hubs Still Dominant?</h2>
<ul>
<li><strong>Do tech hubs (e.g., Silicon Valley, Austin, Boston) still dominate hiring, or are other locations emerging?</strong></li>
</ul>
<p>From the city perspective, New York, Chicago, and Atlanta lead in job counts, each with over 1,500 jobs. Interestingly, none of these cities are considered tech hubs. Instead, most tech hub cities fall into the medium range, with job counts between 1,000 and 1,500.</p>
<p>However, when viewed from a state-level perspective, tech hub cities in Silicon Valley stand out. A possible reason is that jobs in California are distributed across multiple cities. For example, San Francisco focuses on finance and AI, Los Angeles on media and entertainment, and San Jose on semiconductors. These cities still appear in the top 15 in terms of job count by city. Surprisingly, Boston does not have as many jobs as expected, whether viewed by city or by state. This may suggest that companies are relocating their headquarters to other cities such as Chicago and Atlanta.</p>
<p>In summary, jobs in cities like New York, Chicago, and Atlanta are more concentrated in specific urban areas, which makes them stand out in city-level job counts. However, at the state level, Silicon Valley remains a vibrant and prosperous region for job opportunities.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ChenxiLiao-Murphy\.github\.io\/AD688-job-market-analysis-group4\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>